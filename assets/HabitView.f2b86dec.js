import{_ as u,o as r,c as d,p as M,a as b,b as i,M as v,r as h,d as g,m as w,R as L,t as _,e as m,F as C,f as x,g as I,n as P,h as F,i as B,j as p}from"./index.245ac2f5.js";const N={},k=t=>(M("data-v-12f52bff"),t=t(),b(),t),$={width:"19",height:"23",viewBox:"0 0 19 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y=k(()=>i("path",{d:"M1.53867 15.0327L2.9074 11.6971L12.8559 4.98677L15.343 3.30919L17.5797 6.62534L15.0926 8.30292L5.14417 15.0132L1.53867 15.0327Z",fill:"white"},null,-1)),S=k(()=>i("path",{d:"M4.85482 12.796L13.9742 6.64485M13.9742 6.64485L12.8559 4.98677M13.9742 6.64485L15.0926 8.30292M12.8559 4.98677L2.9074 11.6971L1.53867 15.0327L5.14417 15.0132L15.0926 8.30292M12.8559 4.98677L15.343 3.30919L17.5797 6.62534L15.0926 8.30292",stroke:"#3A3A3A","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),T=[Y,S];function H(t,e){return r(),d("svg",$,T)}const q=u(N,[["render",H],["__scopeId","data-v-12f52bff"]]),O={components:{ModalTemplate:v},props:{habitName:{type:String,required:!0}},emits:{close:null,changeName:null},data(){return{attrs:{inputValue:this.habitName,buttonText:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",buttonType:"success"}}},methods:{close(){this.$emit("close")},onButtonClick(t){t!==""&&(this.$emit("change-name",t),this.close())}}};function A(t,e,a,o,n,s){const c=h("modal-template");return r(),g(c,w(n.attrs,{onClose:s.close,onButtonClick:s.onButtonClick}),null,16,["onClose","onButtonClick"])}const E=u(O,[["render",A]]),V={components:{ModalTemplate:v},props:{habitName:{type:String,required:!0}},emits:{close:null,deleteHabit:null},data(){return{attrs:{title:`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435  \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u0438\u0432\u044B\u0447\u043A\u0443 \xAB${this.habitName}\xBB?`,buttonText:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",buttonType:"danger"}}},methods:{close(){this.$emit("close")},onButtonClick(){this.$emit("delete-habit"),this.close()}}};function j(t,e,a,o,n,s){const c=h("modal-template");return r(),g(c,w(n.attrs,{onClose:s.close,onButtonClick:s.onButtonClick}),null,16,["onClose","onButtonClick"])}const R=u(V,[["render",j]]);const z={},U=t=>(M("data-v-78e783b1"),t=t(),b(),t),W={width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z=U(()=>i("path",{d:"M8 1L1 7L8 13",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),G=[Z];function J(t,e){return r(),d("svg",W,G)}const K=u(z,[["render",J],["__scopeId","data-v-78e783b1"]]);const Q={components:{LeftArrowIcon:K,RightArrowIcon:L},props:{days:{type:Array,required:!0}},data(){return{currentMonthDate:new Date(this.days[this.days.length-1].date.getFullYear(),this.days[this.days.length-1].date.getMonth()),currentPrintDay:this.days.length-1}},computed:{beginDay(){return this.days[0]},lastDay(){return this.days[this.days.length-1]},isFirstMonth(){const t=this.currentMonthDate.getMonth(),e=this.currentMonthDate.getFullYear(),a=t===this.beginDay.date.getMonth(),o=e===this.beginDay.date.getFullYear();return a&&o},isLastMonth(){const t=this.currentMonthDate.getMonth(),e=this.currentMonthDate.getFullYear(),a=t===this.lastDay.date.getMonth(),o=e===this.lastDay.date.getFullYear();return a&&o},monthString(){let e=new Intl.DateTimeFormat("ru",{month:"long"}).format(this.currentMonthDate);return e=e[0].toUpperCase()+e.slice(1),`${e}, ${this.currentMonthDate.getFullYear()}`},daysList(){const t=[],e=(6+this.currentMonthDate.getDay())%7;t[e]={number:1};const a=this.currentMonthDate.getFullYear(),o=this.currentMonthDate.getMonth(),n=new Date(a,o,1);for(let s=e+1;s<35;s++)n.setDate(n.getDate()+1),t[s]={number:n.getDate()};n.setDate(1),n.setMonth(n.getMonth()-1);for(let s=e-1;s>-1;s--)n.setDate(n.getDate()-1),t[s]={number:n.getDate()};return this.fillList(t)}},methods:{moveToPrevMonth(){const t=this.currentMonthDate.getFullYear(),e=this.currentMonthDate.getMonth()-1;this.currentMonthDate=new Date(t,e,1),this.isLastMonth?this.currentPrintDay=this.days.length-1:this.isFirstMonth&&(this.currentPrintDay=0)},moveToNextMonth(){const t=this.currentMonthDate.getFullYear(),e=this.currentMonthDate.getMonth()+1;this.currentMonthDate=new Date(t,e,1),this.isLastMonth?this.currentPrintDay=this.days.length-1:this.isFirstMonth&&(this.currentPrintDay=0)},fillList(t){const e=(6+this.currentMonthDate.getDay())%7;if(this.isLastMonth){const a=this.lastDay.date.getDate();for(let o=e+a-1;o>=0;o--)this.days[this.currentPrintDay]&&(t[o].state=this.days[this.currentPrintDay].state,this.currentPrintDay=this.currentPrintDay-1)}else if(this.isFirstMonth){const a=this.beginDay.date.getDate();for(let o=e+a-1;o<35;o++)t[o].state=this.days[this.currentPrintDay].state,this.currentPrintDay=this.currentPrintDay+1}else{this.currentPrintDay=this.days.findIndex(n=>{const s=n.date.getMonth()===this.currentMonthDate.getMonth(),c=n.date.getFullYear()===this.currentMonthDate.getFullYear();return s&&c&&n.date.getDate()===1});let a=this.currentPrintDay;console.log(a),console.log(this.days[a]),console.log(this.days);for(let n=e;n<35;n++)t[n].state=this.days[a].state,a=a+1;let o=this.currentPrintDay;for(let n=e-1;n>=0;n--)t[n].state=this.days[o].state,o=o-1}return t}}},X={class:"calendar"},tt={class:"calendar__month"},et={class:"calendar__title"},nt={class:"calendar__controls"},st=["disabled"],at=["disabled"],ot=I('<hr class="calendar__line" data-v-e43aef6e><ul class="week-names" data-v-e43aef6e><li class="week-name" data-v-e43aef6e>\u043F\u043D</li><li class="week-name" data-v-e43aef6e>\u0432\u0442</li><li class="week-name" data-v-e43aef6e>\u0441\u0440</li><li class="week-name" data-v-e43aef6e>\u0447\u0442</li><li class="week-name" data-v-e43aef6e>\u043F\u0442</li><li class="week-name" data-v-e43aef6e>\u0441\u0431</li><li class="week-name" data-v-e43aef6e>\u0432\u0441</li></ul>',2),it={class:"calendar__days"};function rt(t,e,a,o,n,s){const c=h("left-arrow-icon"),y=h("right-arrow-icon");return r(),d("div",X,[i("div",tt,[i("h3",et,_(s.monthString),1),i("div",nt,[i("button",{onClick:e[0]||(e[0]=(...l)=>s.moveToPrevMonth&&s.moveToPrevMonth(...l)),disabled:s.isFirstMonth,class:"calendar__button prevMonth"},[m(c)],8,st),i("button",{onClick:e[1]||(e[1]=(...l)=>s.moveToNextMonth&&s.moveToNextMonth(...l)),disabled:s.isLastMonth,class:"calendar__button nextMonth"},[m(y)],8,at)])]),ot,i("ul",it,[(r(!0),d(C,null,x(s.daysList,(l,f)=>(r(),d("li",{class:P(["calendar__day",{"day-success":l.state===!0,"day-failure":l.state===!1,"day-current":l.state===null}]),key:f},_(l.number),3))),128))])])}const lt=u(Q,[["render",rt],["__scopeId","data-v-e43aef6e"]]);const ct={components:{PencilIcon:q,ChangingModal:E,DeletingModal:R,HabitCalendar:lt},data(){return{habit:null,isChangingModalOpened:!1,isDeletingModalOpened:!1}},computed:{countSuccessedDays(){const t=[...this.habit.days].reverse(),e=t.findIndex(n=>n.state===!1);let a=0;return t[0].state===!0&&(a=a+1),e===-1?a+t.length-1:a+e-1},beginDay(){return new Intl.DateTimeFormat("ru",{day:"2-digit",month:"2-digit",year:"2-digit"}).format(this.habit.beginDay)}},methods:{openChangingModal(){this.isChangingModalOpened=!0},closeChangingModal(){this.isChangingModalOpened=!1},changeHabitName(t){this.habit.name=t},openDeletingModal(){this.isDeletingModalOpened=!0},closeDeletingModal(){this.isDeletingModalOpened=!1},deleteHabit(){F(this.habit.id),this.$router.push("/")}},created(){const e=+this.$router.currentRoute.value.params.id;this.habit=B(e)}},ht={key:0,class:"habit"},dt={class:"habit__info info"},ut={class:"info__top"},_t={class:"info__title"},gt={class:"info__bottom"},mt={class:"countSuccessedDays"},yt={class:"beginDay"},ft={class:"deleteButton__wrapper"};function Dt(t,e,a,o,n,s){const c=h("pencil-icon"),y=h("habit-calendar"),l=h("changing-modal"),f=h("deleting-modal");return r(),d(C,null,[n.habit?(r(),d("section",ht,[i("div",dt,[i("div",ut,[i("h3",_t,_(n.habit.name),1),i("button",{onClick:e[0]||(e[0]=(...D)=>s.openChangingModal&&s.openChangingModal(...D)),class:"changeButton"},[m(c)])]),i("div",gt,[i("span",mt," \u0414\u043D\u0435\u0439 \u043F\u043E\u0434\u0440\u044F\u0434: "+_(s.countSuccessedDays),1),i("span",yt," \u041D\u0430\u0447\u0430\u043B\u043E: "+_(s.beginDay),1)])]),m(y,{days:n.habit.days},null,8,["days"]),i("div",ft,[i("button",{onClick:e[1]||(e[1]=(...D)=>s.openDeletingModal&&s.openDeletingModal(...D)),class:"deleteButton"}," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u0438\u0432\u044B\u0447\u043A\u0443 ")])])):p("",!0),n.isChangingModalOpened?(r(),g(l,{key:1,habitName:n.habit.name,onClose:s.closeChangingModal,onChangeName:s.changeHabitName},null,8,["habitName","onClose","onChangeName"])):p("",!0),n.isDeletingModalOpened?(r(),g(f,{key:2,habitName:n.habit.name,onClose:s.closeDeletingModal,onDeleteHabit:s.deleteHabit},null,8,["habitName","onClose","onDeleteHabit"])):p("",!0)],64)}const Mt=u(ct,[["render",Dt]]);export{Mt as default};
