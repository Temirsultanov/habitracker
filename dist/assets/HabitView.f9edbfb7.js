import{_,o as r,c as d,p as f,a as y,b as i,r as c,t as g,d as u,M as D,e as p,m as v,R as $,F as x,f as L,n as N,g as F,h as T,i as B,j as H,w as O,k as M,l as Y}from"./index.3ffc2f04.js";const q={},C=t=>(f("data-v-a9431b9f"),t=t(),y(),t),S={class:"pencilIcon",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P=C(()=>i("path",{d:"M1.11839 14.7236L2.48711 11.3879L12.4356 4.67758L14.9227 3L17.1594 6.31615L14.6723 7.99373L4.72388 14.704L1.11839 14.7236Z",fill:"#F8F8F8"},null,-1)),A=C(()=>i("path",{d:"M4.43454 12.4868L13.5539 6.33566M13.5539 6.33566L12.4356 4.67758M13.5539 6.33566L14.6723 7.99373M12.4356 4.67758L2.48711 11.3879L1.11839 14.7236L4.72388 14.704L14.6723 7.99373M12.4356 4.67758L14.9227 3L17.1594 6.31615L14.6723 7.99373",stroke:"#262626","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),E=[P,A];function V(t,n){return r(),d("svg",S,E)}const j=_(q,[["render",V],["__scopeId","data-v-a9431b9f"]]);const R={components:{PencilIcon:j},emits:{"open-changing-modal":null},props:{habit:{type:Object,required:!0}},computed:{countSuccessedDays(){const t=[...this.habit.days].reverse(),n=t.findIndex(a=>a.state===!1);let s=0;return t[0].state===!0&&(s=s+1),n===-1?s+t.length-1:s+n-1},formattedBeginDay(){return new Intl.DateTimeFormat("ru",{day:"2-digit",month:"2-digit",year:"2-digit"}).format(this.habit.beginDay)}},methods:{openChangingModal(){this.$emit("open-changing-modal")}}},U={class:"habitInfo"},W={class:"habitInfo__top"},z={class:"title"},Z={class:"habitInfo__bottom"},G={class:"text-small"},J={class:"text-small"};function K(t,n,s,o,a,e){const l=c("pencil-icon");return r(),d("div",U,[i("div",W,[i("h3",z,g(s.habit.name),1),i("button",{onClick:n[0]||(n[0]=(...h)=>e.openChangingModal&&e.openChangingModal(...h)),class:"habitInfo__changeButton"},[u(l)])]),i("div",Z,[i("span",G,"\u0414\u043D\u0435\u0439 \u043F\u043E\u0434\u0440\u044F\u0434: "+g(e.countSuccessedDays),1),i("span",J," \u041D\u0430\u0447\u0430\u043B\u043E: "+g(e.formattedBeginDay),1)])])}const Q=_(R,[["render",K],["__scopeId","data-v-b3566078"]]),X={components:{ModalTemplate:D},props:{habitName:{type:String,required:!0}},emits:{close:null,"change-name":null},data(){return{attrs:{inputValue:this.habitName,buttonText:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",buttonType:"success"}}},methods:{close(){this.$emit("close")},onButtonClick(t){t!==""&&(this.$emit("change-name",t),this.close())}}};function tt(t,n,s,o,a,e){const l=c("modal-template");return r(),p(l,v(a.attrs,{onClose:e.close,onButtonClick:e.onButtonClick}),null,16,["onClose","onButtonClick"])}const et=_(X,[["render",tt]]),nt={components:{ModalTemplate:D},props:{habitName:{type:String,required:!0}},emits:{close:null,deleteHabit:null},data(){return{attrs:{title:`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435  \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u0438\u0432\u044B\u0447\u043A\u0443 \xAB${this.habitName}\xBB?`,buttonText:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",buttonType:"danger"}}},methods:{close(){this.$emit("close")},onButtonClick(){this.$emit("delete-habit"),this.close()}}};function at(t,n,s,o,a,e){const l=c("modal-template");return r(),p(l,v(a.attrs,{onClose:e.close,onButtonClick:e.onButtonClick}),null,16,["onClose","onButtonClick"])}const st=_(nt,[["render",at]]);const ot={},it=t=>(f("data-v-aacdf190"),t=t(),y(),t),lt={class:"leftArrowIcon",width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rt=it(()=>i("path",{d:"M8 1L1 7L8 13",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),ct=[rt];function dt(t,n){return r(),d("svg",lt,ct)}const ht=_(ot,[["render",dt],["__scopeId","data-v-aacdf190"]]);const _t=new Intl.DateTimeFormat("ru",{month:"long"}),ut={components:{LeftArrowIcon:ht,RightArrowIcon:$},props:{currentMonthDate:{type:Date,required:!0},isFirstMonth:{type:Boolean,required:!0},isLastMonth:{type:Boolean,required:!0}},emits:{"move-to-prev-month":null,"move-to-next-month":null},computed:{formattedDate(){const t=this.currentMonthDate.getFullYear(),n=_t.format(this.currentMonthDate);return`${n[0].toUpperCase()+n.slice(1)}, ${t}`}},methods:{moveToPrevMonth(){this.$emit("move-to-prev-month")},moveToNextMonth(){this.$emit("move-to-next-month")}}},mt={class:"info"},gt={class:"text-medium"},pt={class:"info__controls"},Mt=["disabled"],bt=["disabled"];function ft(t,n,s,o,a,e){const l=c("left-arrow-icon"),h=c("right-arrow-icon");return r(),d("div",mt,[i("h3",gt,g(e.formattedDate),1),i("div",pt,[i("button",{onClick:n[0]||(n[0]=(...m)=>e.moveToPrevMonth&&e.moveToPrevMonth(...m)),disabled:s.isFirstMonth,class:"info__button prevMonth"},[u(l)],8,Mt),i("button",{onClick:n[1]||(n[1]=(...m)=>e.moveToNextMonth&&e.moveToNextMonth(...m)),disabled:s.isLastMonth,class:"info__button nextMonth"},[u(h)],8,bt)])])}const yt=_(ut,[["render",ft],["__scopeId","data-v-67c2a7a7"]]);const Dt={props:{days:{type:Array,required:!0}},methods:{getDayClass(t){let n;return t===!0?n="day-success":t===!1?n="day-failure":t===null&&(n="day-current"),n}}},vt={class:"calendar__days"},xt={class:"text-small"};function Ct(t,n,s,o,a,e){return r(),d("ul",vt,[(r(!0),d(x,null,L(s.days,(l,h)=>(r(),d("li",{key:h,class:N([e.getDayClass(l.state),"calendar__day"])},[i("span",xt,g(l.number),1)],2))),128))])}const wt=_(Dt,[["render",Ct],["__scopeId","data-v-8bd62a29"]]);const b=42,kt={components:{CalendarInfo:yt,CalendarDays:wt},props:{days:{type:Array,required:!0}},data(){const t=this.days[this.days.length-1].date;return{currentMonthDate:new Date(t.getFullYear(),t.getMonth(),1)}},computed:{beginDay(){return this.days[0]},lastDay(){return this.days[this.days.length-1]},isFirstMonth(){const t=this.currentMonthDate.getMonth(),n=this.currentMonthDate.getFullYear(),s=t===this.beginDay.date.getMonth(),o=n===this.beginDay.date.getFullYear();return s&&o},isLastMonth(){const t=this.currentMonthDate.getMonth(),n=this.currentMonthDate.getFullYear(),s=t===this.lastDay.date.getMonth(),o=n===this.lastDay.date.getFullYear();return s&&o},daysList(){const t=[],n=(6+this.currentMonthDate.getDay())%7;t[n]={number:1};const s=this.currentMonthDate.getFullYear(),o=this.currentMonthDate.getMonth(),a=new Date(s,o,1);for(let e=n+1;e<b;e++)a.setDate(a.getDate()+1),t[e]={number:a.getDate()};a.setDate(1),a.setMonth(a.getMonth()-1);for(let e=n-1;e>-1;e--)a.setDate(a.getDate()-1),t[e]={number:a.getDate()};return this.fillList(t)}},methods:{moveToPrevMonth(){const t=this.currentMonthDate.getMonth()-1;this.currentMonthDate.setMonth(t),this.currentMonthDate=new Date(this.currentMonthDate)},moveToNextMonth(){const t=this.currentMonthDate.getMonth()+1;this.currentMonthDate.setMonth(t),this.currentMonthDate=new Date(this.currentMonthDate)},fillList(t){const n=(6+this.currentMonthDate.getDay())%7;let s;if(this.isLastMonth){const o=this.lastDay.date.getDate();s=this.days.length-1;for(let a=n+o-1;a>=0;a--)this.days[s]&&(t[a].state=this.days[s].state,s=s-1)}else if(this.isFirstMonth){const o=this.beginDay.date.getDate();s=0;for(let a=n+o-1;a<b;a++)t[a].state=this.days[s].state,s=s+1}else{s=this.days.findIndex(e=>{const l=e.date.getMonth()===this.currentMonthDate.getMonth(),h=e.date.getFullYear()===this.currentMonthDate.getFullYear();return l&&h&&e.date.getDate()===1});let o=s;for(let e=n;e<b;e++)t[e].state=this.days[o].state,o=o+1;let a=s;for(let e=n-1;e>=0;e--)t[e].state=this.days[a].state,a=a-1}return t}}},It={class:"calendar"},$t=F('<hr class="calendar__line" data-v-debe0aba><ul class="calendar__weekNames" data-v-debe0aba><li class="calendar__weekName text-small" data-v-debe0aba>\u043F\u043D</li><li class="calendar__weekName text-small" data-v-debe0aba>\u0432\u0442</li><li class="calendar__weekName text-small" data-v-debe0aba>\u0441\u0440</li><li class="calendar__weekName text-small" data-v-debe0aba>\u0447\u0442</li><li class="calendar__weekName text-small" data-v-debe0aba>\u043F\u0442</li><li class="calendar__weekName text-small" data-v-debe0aba>\u0441\u0431</li><li class="calendar__weekName text-small" data-v-debe0aba>\u0432\u0441</li></ul>',2);function Lt(t,n,s,o,a,e){const l=c("calendar-info"),h=c("calendar-days");return r(),d("div",It,[u(l,{onMoveToPrevMonth:e.moveToPrevMonth,onMoveToNextMonth:e.moveToNextMonth,currentMonthDate:a.currentMonthDate,isFirstMonth:e.isFirstMonth,isLastMonth:e.isLastMonth},null,8,["onMoveToPrevMonth","onMoveToNextMonth","currentMonthDate","isFirstMonth","isLastMonth"]),$t,u(h,{days:e.daysList},null,8,["days"])])}const Nt=_(kt,[["render",Lt],["__scopeId","data-v-debe0aba"]]);const Ft={components:{HabitInfo:Q,ChangingModal:et,DeletingModal:st,HabitCalendar:Nt},data(){return{habit:null,isChangingModalOpened:!1,isDeletingModalOpened:!1}},methods:{openChangingModal(){this.isChangingModalOpened=!0},closeChangingModal(){this.isChangingModalOpened=!1},changeHabitName(t){T(this.habit.id,t)},openDeletingModal(){this.isDeletingModalOpened=!0},closeDeletingModal(){this.isDeletingModalOpened=!1},deleteHabit(){B(this.habit.id),this.$router.push("/")}},created(){const n=+this.$route.params.id;H(n).then(s=>this.habit=s)}},Tt=t=>(f("data-v-0a93d59f"),t=t(),y(),t),Bt={key:0,class:"habit"},Ht={class:"deleteButtonWrapper"},Ot={key:1,class:"message text-small"},Yt={key:2,class:"message"},qt=Tt(()=>i("h3",{class:"title"},"\u041F\u0440\u0438\u0432\u044B\u0447\u043A\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 :(",-1)),St=Y(" \u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E ");function Pt(t,n,s,o,a,e){const l=c("habit-info"),h=c("habit-calendar"),m=c("router-link"),w=c("changing-modal"),k=c("deleting-modal");return r(),d(x,null,[a.habit?(r(),d("section",Bt,[u(l,{onOpenChangingModal:e.openChangingModal,habit:a.habit},null,8,["onOpenChangingModal","habit"]),u(h,{days:a.habit.days},null,8,["days"]),i("div",Ht,[i("button",{onClick:n[0]||(n[0]=(...I)=>e.openDeletingModal&&e.openDeletingModal(...I)),class:"deleteButton text-small"}," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u0438\u0432\u044B\u0447\u043A\u0443 ")])])):a.habit===null?(r(),d("h3",Ot," \u041F\u0440\u0438\u0432\u044B\u0447\u043A\u0430 \u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044F, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u0441\u0435\u043A\u0443\u043D\u0434\u0443... ")):a.habit===void 0?(r(),d("div",Yt,[qt,u(m,{to:"/",class:"linkToHome text-small"},{default:O(()=>[St]),_:1})])):M("",!0),a.isChangingModalOpened?(r(),p(w,{key:3,onClose:e.closeChangingModal,onChangeName:e.changeHabitName,habitName:a.habit.name},null,8,["onClose","onChangeName","habitName"])):M("",!0),a.isDeletingModalOpened?(r(),p(k,{key:4,onClose:e.closeDeletingModal,onDeleteHabit:e.deleteHabit,habitName:a.habit.name},null,8,["onClose","onDeleteHabit","habitName"])):M("",!0)],64)}const Et=_(Ft,[["render",Pt],["__scopeId","data-v-0a93d59f"]]);export{Et as default};
